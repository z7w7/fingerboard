!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("lodash")):"function"==typeof define&&define.amd?define(["react","lodash"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["z-fingerboard"]=t(e.React,e.lodash)}(this,(function(e,t){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=r(e);const l=[3,5,7,9,15,17],f=[12],s=t.times(6,Number),n=t.times(21,Number);return r=>{const{data:u,className:i="",fretMark:c="default",fretWidth:o=72}=r,d=e.useRef(null),m=e.useRef([]),[_,h]=e.useState([]);e.useEffect((()=>{(()=>{if(t.isEmpty(u))return h([]),void d.current?.scrollTo(0,0);let e,r;t.isArray(u)?(h(u),e=t.minBy(u,"fret")?.fret||0,r=t.maxBy(u,"fret")?.fret||0):(h([u]),e=u.fret,r=u.fret),e=Math.floor(e),r=Math.floor(r);const a=m.current[e].offsetLeft,l=m.current[r].offsetLeft,{offsetWidth:f=0,scrollLeft:s=0}=d.current||{},n=o+4;l>f+s-n&&d.current?.scrollTo(l-f+n,0),a<s&&d.current?.scrollTo(a,0)})()}),[u]);const p=e=>{const{offsetLeft:t,offsetWidth:r}=m.current[e];return`${t+r/2}px`},y=e.useCallback((()=>{let e="z-fingerboard";return e+=c?" z-fingerboard--mark":"",e+=i?` ${i}`:"",e}),[c,i]);return a.default.createElement("div",{className:y(),ref:d},a.default.createElement("div",{className:"z-fingerboard__content"},e.useMemo((()=>a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"z-frets"},n.map((e=>a.default.createElement("div",{key:t.uniqueId("fret_"),className:"z-frets__item",ref:t=>{t&&(m.current[e]=t)}},a.default.createElement("div",{className:`z-frets__item__block${l.includes(e)?" anchor-single":""}${f.includes(e)?" anchor-double":""}`,style:e?{width:`${o}px`}:{}}),"default"===c?(l.includes(e)||f.includes(e))&&a.default.createElement("div",{className:"z-frets__item__mark"},e):"all"===c?a.default.createElement("div",{className:"z-frets__item__mark"},e):null)))),a.default.createElement("div",{className:"z-strings"},s.map((()=>a.default.createElement("div",{key:t.uniqueId("string_"),className:"z-strings__item"})))))),[c,o]),_.map((e=>a.default.createElement("div",{key:t.uniqueId("point_"),className:"z-point",style:{left:p(Math.floor(e.fret)),top:20*Math.floor(e.string)+"%"}})))))}}));
